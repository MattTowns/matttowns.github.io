"use strict";var galleryNext=document.querySelector("#gallery-next-button");galleryNext.addEventListener("click",function(e){incrementGallery()});var galleryPrevious=document.querySelector("#gallery-previous-button");galleryPrevious.addEventListener("click",function(e){decrementGallery()});for(var incrementGallery=function(){for(var e=0;e<canvasElements.length;e++){var t=canvasElements[e];t.dataset.id<glitchElements.length-1?t.dataset.id++:t.dataset.id=0;var i=t.getContext("2d");i.clearRect(0,0,t.width,t.height);var n=new Image;0==t.dataset.id?n.src=glitchElements[glitchElements.length-1].src:n.src=glitchElements[t.dataset.id-1].src,t.dataset.src=n.src,i.drawImage(n,0,0,n.width,n.height,0,0,t.width,t.height),t.removeEventListener("mouseenter",glitchAnimationEnterEvent),t.addEventListener("mouseenter",glitchAnimationEnterEvent)}},decrementGallery=function(){for(var e=0;e<canvasElements.length;e++){var t=canvasElements[e];0<t.dataset.id?t.dataset.id--:t.dataset.id=glitchElements.length-1;var i=t.getContext("2d");i.clearRect(0,0,t.width,t.height);var n=new Image;0==t.dataset.id?n.src=glitchElements[glitchElements.length-1].src:n.src=glitchElements[t.dataset.id-1].src,t.dataset.src=n.src,i.drawImage(n,0,0,n.width,n.height,0,0,t.width,t.height),t.removeEventListener("mouseenter",glitchAnimationEnterEvent),t.addEventListener("mouseenter",glitchAnimationEnterEvent)}},glitchFull=function e(t,i,n,r,a){var o=i.width/i.height;if(n<180)i.getContext("2d").clearRect(0,0,i.width,i.height,50),i.getContext("2d").drawImage(t,0,0,t.width,t.height,40+15*o,0,i.width-(40+15*o),i.height-15);else if(180<=n){var h=i.getContext("2d"),s=(getRandom(0,t.height),(i.height-15)/t.height);h.clearRect(0,0,i.width,i.height,50);for(var l=i.height-11;0<=l;l--){if(a[0].completed||8==r[a[0].peak].num){if(8==r[a[0].peak].num&&!a[0].completed){a[0].completed=!0;for(var d=a[0].peak+a[0].moves[a[0].moves.length-1].upper;d<=a[0].peak+a[0].moves[a[0].moves.length-1].lower;d++)r[d].num=0}}else g(a[0],r[l],l);(6<r[a[0].peak].num||a[0].completed)&&g(a[1],r[l],l),a[0].completed&&g(a[2],r[l],l),h.drawImage(t,0,0+l/s,t.width,1/s,40+15*o+r[l].move,0+l,i.width-(40+15*o),1)}}function g(r,a,o){r.moves.forEach(function(e,t){if(0==t){if(o>=r.peak+e.upper&&o<r.peak+e.lower)for(var i=0;i<e.positions.length;i++)if(a.num<r.num1+r.num1*i)return a.move=e.positions[i],void a.num++}else if((o<r.peak+r.moves[t-1].upper||o>=r.peak+r.moves[t-1].lower)&&o>=r.peak+e.upper&&o<r.peak+e.lower)for(var n=0;n<e.positions.length;n++)if(a.num<r.num1+r.num1*n)return a.move=e.positions[n],void a.num++})}270<++n&&(n=0,r=Array.apply(null,Array(i.height)).map(function(){return{num:0,max:!1,move:0}}),a.forEach(function(e){e.completed=!1})),requestAnimationFrame(function(){e(t,i,n,r,a)})},hoverGlitch=function e(t,i,n,r,a,o){if(240<o&&o<270&&o%5==0&&(a=Math.round(10*(.7*Math.random()+.3))/10),o%4==0){var h=i.getContext("2d"),s=new Image;s.src=t,h.drawImage(s,0,0,s.width,s.height,0,0,i.width,i.height);var l=i.height/s.height,d=s.height*r;s.height;if(240<o&&o<270){h.drawImage(s,0,0,s.width,s.height*n*(1-a),0,0,i.width,i.height*n*(1-a));for(var g=0;g<s.height*n*a;g++)h.drawImage(s,0,s.height*n*(1-a)+g/l,s.width,1/l,getRandom(-1,4),i.height*n*(1-a)+g,i.width,1)}else h.drawImage(s,0,0,s.width,s.height*n,0,0,i.width,i.height*n);for(var m=0;m<d;m++)h.drawImage(s,0,s.height*n+m/l,s.width,1/l,getRandom(-1,4),i.height*n+m,i.width,1);h.drawImage(s,0,s.height*(r+n),s.width,s.height*r,0,i.height*(r+n),i.width,i.height*r);for(var c=h.getImageData(0,0,i.width,i.height),u=0;u<c.data.length;u+=4)c.data[u]+=20,c.data[u+1]+=20,c.data[u+2]+=20;h.putImageData(c,0,0)}360<++o&&(o=0),i.classList.contains("canvas-active")&&requestAnimationFrame(function(){e(t,i,.45,.25,a,o)})},glitchAnimationEnterEvent=function(e){e.target.classList.add("canvas-active");var a=0,o=0,h=e.target,s=h.getContext("2d"),l=new Image;l.src=e.target.dataset.src;var d=h.height/l.height,g=.45,m=.25,c=l.height*m;l.height;s.drawImage(l,0,0,l.width,l.height,0,0,h.width,h.height),function e(){240<a&&a<270&&a%5==0&&(o=Math.round(10*(.7*Math.random()+.3))/10);if(a%4==0){if(s.drawImage(l,0,0,l.width,l.height,0,0,h.width,h.height),240<a&&a<270){s.drawImage(l,0,0,l.width,l.height*g*(1-o),0,0,h.width,h.height*g*(1-o));for(var t=0;t<l.height*g*o;t++)s.drawImage(l,0,l.height*g*(1-o)+t/d,l.width,1/d,getRandom(-1,4),h.height*g*(1-o)+t,h.width,1)}else s.drawImage(l,0,0,l.width,l.height*g,0,0,h.width,h.height*g);for(var i=0;i<c;i++)s.drawImage(l,0,l.height*g+i/d,l.width,1/d,getRandom(-1,4),h.height*g+i,h.width,1);s.drawImage(l,0,l.height*(m+g),l.width,l.height*m,0,h.height*(m+g),h.width,h.height*m);for(var n=s.getImageData(0,0,h.width,h.height),r=0;r<n.data.length;r+=4)n.data[r]+=20,n.data[r+1]+=20,n.data[r+2]+=20;s.putImageData(n,0,0)}a++;360<a&&(a=0);h.classList.contains("canvas-active")&&requestAnimationFrame(function(){e()});h.addEventListener("mouseleave",function(){h.classList.remove("canvas-active")})}()},glitchAnimationLeaveEvent=function(e){var t=e.target,i=t.getContext("2d"),n=new Image;n.src=t.dataset.src,setTimeout(function(){i.clearRect(0,0,t.width,t.height),i.drawImage(n,0,0,n.width,n.height,0,0,t.width,t.height)},50),t.classList.remove("canvas-active")},glitchElements=document.querySelectorAll(".glitch"),canvasElements=document.querySelectorAll(".gallery-item-canvas"),_loop=function(t){var i=canvasElements[t];if(i.width=parseInt(getComputedStyle(i).width),i.height=parseInt(getComputedStyle(i).height),glitchElements[t].complete){var e=new Image;e.src=glitchElements[t].src,i.dataset.src=glitchElements[t].src,i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),i.addEventListener("mouseenter",glitchAnimationEnterEvent),i.addEventListener("mouseleave",glitchAnimationLeaveEvent)}else glitchElements[t].addEventListener("load",function(){var e=new Image;e.src=glitchElements[t].src,i.dataset.src=glitchElements[t].src,i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),i.addEventListener("mouseenter",glitchAnimationEnterEvent),i.addEventListener("mouseleave",glitchAnimationLeaveEvent)})},i=0;i<canvasElements.length;i++)_loop(i);var glitchAutoElements=document.querySelectorAll(".glitch-auto"),_loop2=function(r){var a=glitchAutoElements[r].nextElementSibling;if(glitchAutoElements[r].complete){ctx=a.getContext("2d"),a.setAttribute("width",glitchAutoElements[r].width+40),a.setAttribute("height",glitchAutoElements[r].height);var e=new Image;e.src=glitchAutoElements[r].src;var t=[{peak:Math.floor(.8*(a.height-15)),num1:2,completed:!1,moves:[{upper:-2,lower:2,positions:[-35,-20,-35,0]},{upper:-4,lower:3,positions:[-20,-10,-25,0]},{upper:-5,lower:5,positions:[-15,5,-15,0]},{upper:-7,lower:7,positions:[-10,10,-8,0]},{upper:-9,lower:9,positions:[-6,-4,-6,0]}]},{peak:Math.floor(.1*(a.height-15)),num1:2,completed:!1,moves:[{upper:-2,lower:2,positions:[-20,-35,-20,0]},{upper:-4,lower:3,positions:[-10,-8,-15,0]},{upper:-6,lower:5,positions:[-8,6,-4,0]},{upper:-8,lower:7,positions:[-2,4,-3,0]}]},{peak:Math.floor(.6*(a.height-15)),num1:2,completed:!1,moves:[{upper:-2,lower:2,positions:[-24,-18,20,0]},{upper:-3,lower:3,positions:[-15,-10,-13,0]},{upper:-4,lower:4,positions:[-8,10,-7,0]},{upper:-5,lower:5,positions:[-4,3,-4,0]}]}],i=(a.height,e.height,Array.apply(null,Array(a.height)).map(function(){return{num:0,max:!1,move:0}}));ctx.drawImage(e,0,0,e.width,e.height,40,0,a.width-40,a.height),requestAnimationFrame(function(){glitchFull(e,a,0,i,t)}),glitchAutoElements[r].parentNode.removeChild(glitchAutoElements[r])}else glitchAutoElements[r].addEventListener("load",function(){var e=a.getContext("2d");a.setAttribute("width",glitchAutoElements[r].width+40),a.setAttribute("height",glitchAutoElements[r].height);var t=[{peak:Math.floor(.8*(a.height-15)),num1:2,completed:!1,moves:[{upper:-2,lower:2,positions:[-35,-20,-35,0]},{upper:-4,lower:3,positions:[-20,-10,-25,0]},{upper:-5,lower:5,positions:[-15,5,-15,0]},{upper:-7,lower:7,positions:[-10,10,-8,0]},{upper:-9,lower:9,positions:[-6,-4,-6,0]}]},{peak:Math.floor(.1*(a.height-15)),num1:2,completed:!1,moves:[{upper:-2,lower:2,positions:[-20,-35,-20,0]},{upper:-4,lower:3,positions:[-10,-8,-15,0]},{upper:-6,lower:5,positions:[-8,6,-4,0]},{upper:-8,lower:7,positions:[-2,4,-3,0]}]},{peak:Math.floor(.6*(a.height-15)),num1:2,completed:!1,moves:[{upper:-2,lower:2,positions:[-24,-18,20,0]},{upper:-3,lower:3,positions:[-15,-10,-13,0]},{upper:-4,lower:4,positions:[-8,10,-7,0]},{upper:-5,lower:5,positions:[-4,3,-4,0]}]}],i=new Image;i.src=glitchAutoElements[r].src;a.height,i.height;var n=Array.apply(null,Array(a.height)).map(function(){return{num:0,max:!1,move:0}});e.drawImage(i,0,0,i.width,i.height,40,0,a.width-40,a.height),requestAnimationFrame(function(){glitchFull(i,a,0,n,t)}),glitchAutoElements[r].parentNode.removeChild(glitchAutoElements[r])})};for(i=glitchAutoElements.length-1;0==i;i--){var ctx;_loop2(i)}function getRandom(e,t){return Math.floor(Math.random()*(t-e+1))+e}window.addEventListener("scroll",function(){var e=document.querySelector(".signup-section"),t=document.querySelector(".gallery");window.pageYOffset>window.innerHeight?(e.classList.add("fixed"),t.classList.add("fixed-sign-up")):(e.classList.remove("fixed"),t.classList.remove("fixed-sign-up"))});var slideLeft=document.querySelectorAll(".slide-from-left");function slideIn(){for(var e=0;e<slideLeft.length;e++)isInViewport(slideLeft[e])&&(slideLeft[e].style.transform="translateX(0)")}function isInViewport(e){var t=e.getBoundingClientRect();return 0<=t.bottom&&0<=t.right&&t.top<=(window.innerHeight||document.documentElement.clientHeight)&&t.left<=(window.innerWidth||document.documentElement.clientWidth)}function registerListener(e,t){window.addEventListener?window.addEventListener(e,t):window.attachEvent("on"+e,t)}registerListener("load",slideIn),registerListener("scroll",slideIn),registerListener("resize",slideIn);